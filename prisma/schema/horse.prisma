// npx neonctl@latest init
// psql 'postgresql://neondb_owner:npg_b5FQGr3UwHTE@ep-shiny-moon-ahoomtj8-pooler.c-3.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require'

enum HorseStatus {
    SUBMITTED // submitted by user
    APPROVED // approved by admin
    ACCEPTED // admin edits approved
    SOLD // the horse is sold
}

model Horse {
    id String @id @default(uuid())

    userUid String
    user    User   @relation(fields: [userUid], references: [uid], onDelete: Cascade)

    categoryId String
    category   HorseCategory @relation(fields: [categoryId], references: [id])

    name     String
    pedigree String?
    age      Int

    genderId String
    gender   HorseGender @relation(fields: [genderId], references: [id])

    height Int

    disciplineId String
    discipline   HorseDiscipline @relation(fields: [disciplineId], references: [id])

    location String

    price Float

    description String

    photos   String[]
    videoUrl String?

    vetReport   String?
    xrayResults String?

    status HorseStatus @default(SUBMITTED)

    createdAt       DateTime             @default(now())
    updatedAt       DateTime             @updatedAt
    favoriteByUsers UserFavoriteHorses[]

    @@index([status])
    @@index([categoryId])
}
